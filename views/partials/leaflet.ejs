<script>

  // don't forget to include leaflet-heatmap.js
/*var testData = {
  max: 30,
  data: [{lat: 24.6408, lng:46.7728, count: 25},{lat: 50.75, lng:-1.55, count: 10}]
};*/

var baseLayer = L.tileLayer(
  'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{
    attribution: '...',
    maxZoom: 15
  }
);

var cfg = {
  "radius": 15,
  "maxOpacity": .5, 
  "scaleRadius": false,
  "useLocalExtrema": false,
  latField: 'lat',
  lngField: 'lng',
  valueField: 'count',
  blur: 0.95,
  gradient: { 
  '.5': 'yellow',
  '.8': 'orange',
  '.95': 'red'
  }
};

var min = 1;
var max = 3910;
var data = addressPoints.map(function (p) { 
	// normalize intensity values to between 0 and 1
	var intensity = parseInt(p[2]) || 0;
  var normalized = (intensity - min) / (max - min);
  return { lat: p[0], lng: p[1], count: parseInt(p[2]) || 0 };
});
console.log("DATA", data);

var testData = {
  max: max,
  data: data
};

var map = new L.Map('map').setView([-37.87, 175.475], 12);
L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',
    {maxZoom: 19}).addTo(map); 

var heatmapLayer = new HeatmapOverlay(cfg).addTo(map);

axios.get('http://localhost:3000/v1/resources/data').then(res =>{
  heatmapLayer.setData(res.data);
});
</script>